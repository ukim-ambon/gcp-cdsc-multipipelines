  name: Sync to Google Cloud Storage

  on:
    push:
      branches:
        - main  # Adjust if your default branch is named differently

  jobs:
    sync:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout Repository
          uses: actions/checkout@v3

        - name: Authenticate with Google Cloud
          uses: google-github-actions/auth@v1
          with:
            credentials_json: ${{ secrets.CDSC1_GS_GH_SERACC }}

        - name: Sync Repository to GCS
          uses: google-github-actions/upload-cloud-storage@v1
          with:
            path: .
            destination: cdsc_project
            parent: false
